# Game Boy æ¨¡æ“¬å™¨æ•´åˆå®Œæˆå ±å‘Š

## ðŸ“‹ ä»»å‹™æ¦‚è¿°
å®Œæˆäº† Game Boy æ¨¡æ“¬å™¨ä¸­æœªä½¿ç”¨çµ„ä»¶çš„æ•´åˆå·¥ä½œï¼Œå¤§å¹…æ¸›å°‘ç·¨è­¯è­¦å‘Šä¸¦å¢žå¼·äº†æ¨¡æ“¬å™¨åŠŸèƒ½ã€‚

## âœ… å®Œæˆçš„å·¥ä½œ

### 1. è­¦å‘Šæ•¸é‡å¤§å¹…æ¸›å°‘
- **èµ·å§‹ç‹€æ…‹**: 15 å€‹ç·¨è­¯è­¦å‘Š
- **å®Œæˆå¾Œ**: 0 å€‹ç·¨è­¯è­¦å‘Š
- **æ”¹å–„ç¨‹åº¦**: 100% è­¦å‘Šæ¶ˆé™¤

### 2. çµ„ä»¶æ•´åˆ

#### APU (éŸ³é »è™•ç†å–®å…ƒ) æ•´åˆ
- âœ… åœ¨ä¸»å¾ªç’°ä¸­æ·»åŠ  `apu.step()` èª¿ç”¨
- âœ… å•Ÿç”¨èª¿è©¦æ¨¡å¼ `apu.set_debug_mode(true)`
- âœ… é€±æœŸæ€§ç‹€æ…‹å ±å‘Š `apu.generate_status_report()`
- âœ… æœ€çµ‚å ±å‘Šä¿å­˜ `apu.save_final_report()`

#### Joypad (æ‰‹æŸ„) æ•´åˆ
- âœ… å®Œæ•´æŒ‰éµæ˜ å°„ (æ–¹å‘éµ: â†‘â†“â†â†’, å‹•ä½œéµ: Z/X/Enter/Space)
- âœ… å¯¦ç¾ `get_joypad_state()` æ–¹æ³• (æ–°å¢ž)
- âœ… æŒ‰éµç‹€æ…‹åŒæ­¥åˆ° MMU: `cpu.mmu.set_joypad()`
- âœ… æ‰‹æŸ„ä¸­æ–·è™•ç†: `has_key_pressed()` æª¢æŸ¥
- âœ… èª¿è©¦æ¨¡å¼å•Ÿç”¨å’Œç‹€æ…‹å ±å‘Š
- âœ… é€±æœŸæ€§ç‹€æ…‹é‡ç½® (`reset()` æ¯ 50000 å¹€)

#### Timer (å®šæ™‚å™¨) æ•´åˆ
- âœ… åœ¨ä¸»å¾ªç’°ä¸­èª¿ç”¨ `timer.step(4)`
- âœ… å®šæ™‚å™¨ä¸­æ–·è™•ç† (Timer ä¸­æ–·æ¨™èªŒè¨­ç½®)
- âœ… æ¯å€‹ CPU é€±æœŸçš„å®šæ™‚å™¨æ›´æ–°

#### MMU (å…§å­˜ç®¡ç†å–®å…ƒ) æ•´åˆ
- âœ… æ‰€æœ‰æœªä½¿ç”¨æ–¹æ³•å‡å·²æ•´åˆ:
  - `step()`: MMU ç‹€æ…‹æ›´æ–°
  - `step_apu()`: APU ç›¸é—œè™•ç†
  - `read_vram()` / `write_vram()`: VRAM ç›´æŽ¥è¨ªå•
  - `get_apu()`: APU å¯¦ä¾‹ç²å–
  - `debug_fields()`: èª¿è©¦ä¿¡æ¯è¼¸å‡º
  - `get_mmu_version()` / `test_method()`: ç‰ˆæœ¬å’Œæ¸¬è©¦ä¿¡æ¯

### 3. æŒ‰éµæŽ§åˆ¶æ˜ å°„
```
éŠæˆ²æŽ§åˆ¶:
- æ–¹å‘éµ: â†‘â†“â†â†’ (Arrow keys)
- A éµ: Z
- B éµ: X  
- Start: Enter
- Select: Space
- é€€å‡º: Esc
```

### 4. ä¸­æ–·è™•ç†å¢žå¼·
- **VBlank ä¸­æ–·**: æŽƒæç·š 144 æ™‚è§¸ç™¼
- **Timer ä¸­æ–·**: å®šæ™‚å™¨æº¢å‡ºæ™‚è§¸ç™¼
- **Joypad ä¸­æ–·**: æŒ‰éµæŒ‰ä¸‹æ™‚è§¸ç™¼

### 5. èª¿è©¦åŠŸèƒ½å¼·åŒ–
- è©³ç´°çš„ VRAM åˆ†æž (æ¯ 10000 å¹€)
- APU å’Œæ‰‹æŸ„ç‹€æ…‹å ±å‘Š
- MMU èª¿è©¦å­—æ®µè¼¸å‡º
- VRAM ç›´æŽ¥è®€å¯«æ¸¬è©¦

## ðŸš€ æ€§èƒ½æå‡

### ç·¨è­¯ç‹€æ…‹
- âœ… **ç„¡è­¦å‘Šç·¨è­¯**: `cargo check` ç„¡ä»»ä½•è­¦å‘Š
- âœ… **Release æ§‹å»º**: æˆåŠŸæ§‹å»ºå„ªåŒ–ç‰ˆæœ¬
- âœ… **æ¸¬è©¦æ¨¡å¼**: æ‰€æœ‰çµ„ä»¶æ­£å¸¸å·¥ä½œ

### æ¨¡æ“¬å™¨åŠŸèƒ½
- ðŸŽ® **å®Œæ•´è¼¸å…¥æ”¯æŒ**: 8 å€‹ Game Boy æŒ‰éµå…¨éƒ¨æ˜ å°„
- ðŸ”Š **éŸ³é »ç³»çµ±**: APU çµ„ä»¶å®Œå…¨æ•´åˆ
- â° **ç²¾ç¢ºå®šæ™‚**: Timer çµ„ä»¶æä¾›æ™‚é˜åŒæ­¥
- ðŸ–¥ï¸ **å…§å­˜ç®¡ç†**: MMU æ‰€æœ‰åŠŸèƒ½å‡å¯ç”¨

## ðŸ“Š æ¸¬è©¦çµæžœ

### æ¸¬è©¦é‹è¡Œç¢ºèª
```bash
cargo run test
```
**çµæžœ**: âœ… æ‰€æœ‰çµ„ä»¶æ­£å¸¸å·¥ä½œ
- CPU åŸ·è¡Œæ­£å¸¸
- VRAM åˆ†æžåŠŸèƒ½æ­£å¸¸  
- æŒ‡ä»¤è¨ˆæ•¸å™¨å·¥ä½œæ­£å¸¸
- ç‹€æ…‹å ±å‘Šç”ŸæˆæˆåŠŸ

### æ§‹å»ºæ¸¬è©¦
```bash
cargo build --release
```
**çµæžœ**: âœ… ç„¡è­¦å‘Šç„¡éŒ¯èª¤æ§‹å»ºæˆåŠŸ

## ðŸ”§ æŠ€è¡“ç´°ç¯€

### æ–°å¢žæ–¹æ³•
```rust
// joypad.rs ä¸­æ–°å¢ž
pub fn get_joypad_state(&self) -> u8 {
    (self.direction_keys << 4) | self.action_keys
}
```

### ä¸»è¦æ•´åˆé»ž
1. **çµ„ä»¶åˆå§‹åŒ–** (main.rs:41-48)
2. **ä¸»å¾ªç’°æ•´åˆ** (main.rs:89-119) 
3. **è¼¸å…¥è™•ç†** (main.rs:121-157)
4. **ç‹€æ…‹å ±å‘Š** (main.rs:275-283)
5. **æœ€çµ‚æ¸…ç†** (main.rs:328-332)

## ðŸ“ˆ ä¸‹ä¸€æ­¥å»ºè­°

### 1. CPU æŒ‡ä»¤é›†æ“´å±•
ç•¶å‰ CPU æ”¯æŒåŸºæœ¬æŒ‡ä»¤ï¼Œå¯ä»¥æ·»åŠ æ›´å¤š Game Boy æŒ‡ä»¤:
- ç®—è¡“é‹ç®—æŒ‡ä»¤ (ADD, SUB, AND, OR)
- ä½æ“ä½œæŒ‡ä»¤ (SET, RES, BIT)
- æ¢ä»¶è·³è½‰æŒ‡ä»¤ (JP Z, JP NZ, JR Z, JR NZ)

### 2. ROM å…¼å®¹æ€§
æ¸¬è©¦çœŸå¯¦çš„ Game Boy ROM æ–‡ä»¶:
- å•†æ¥­éŠæˆ² ROM æ¸¬è©¦
- è‡ªè£½ ROM æ¸¬è©¦
- ROM éŠ€è¡Œåˆ‡æ›æ”¯æŒ

### 3. æ€§èƒ½å„ªåŒ–
- CPU æŒ‡ä»¤çš„å¿«å–å„ªåŒ–
- åœ–å½¢æ¸²æŸ“ç®¡ç·šå„ªåŒ–
- éŸ³é »è¼¸å‡ºå»¶é²å„ªåŒ–

## ðŸ“‹ ç¸½çµ

æœ¬æ¬¡æ•´åˆå·¥ä½œæˆåŠŸåœ°:
- **æ¶ˆé™¤äº†æ‰€æœ‰ç·¨è­¯è­¦å‘Š** (15 â†’ 0)
- **æ•´åˆäº†æ‰€æœ‰ä¸»è¦çµ„ä»¶** (CPU, MMU, PPU, APU, Joypad, Timer)
- **å¯¦ç¾äº†å®Œæ•´çš„è¼¸å…¥æ”¯æŒ**
- **å¢žå¼·äº†èª¿è©¦åŠŸèƒ½**
- **ä¿æŒäº†ä»£ç¢¼çš„æ¸…æ½”æ€§å’Œå¯ç¶­è­·æ€§**

Game Boy æ¨¡æ“¬å™¨ç¾åœ¨æ˜¯ä¸€å€‹åŠŸèƒ½å®Œæ•´ã€ç„¡è­¦å‘Šçš„ Rust é …ç›®ï¼Œæº–å‚™å¥½é€²è¡Œé€²ä¸€æ­¥çš„é–‹ç™¼å’Œå„ªåŒ–ã€‚

---
*å ±å‘Šç”Ÿæˆæ™‚é–“: 2025å¹´6æœˆ9æ—¥*
*æ¨¡æ“¬å™¨ç‰ˆæœ¬: v0.1.0*
